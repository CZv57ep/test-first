mergeron.gen.data_generation
============================

.. py:module:: mergeron.gen.data_generation

.. autoapi-nested-parse::

   Methods to generate market data, including shares price, marginsm, and diversion ratios
   for analyzing merger enforcement policy.







Module Contents
---------------

.. py:class:: SeedSequenceData

   Bases: :py:obj:`NamedTuple`


   .. py:attribute:: mktshr_rng_seed_seq
      :type:  numpy.random.SeedSequence


   .. py:attribute:: pcm_rng_seed_seq
      :type:  numpy.random.SeedSequence


   .. py:attribute:: fcount_rng_seed_seq
      :type:  numpy.random.SeedSequence | None


   .. py:attribute:: pr_rng_seed_seq
      :type:  numpy.random.SeedSequence | None


.. py:function:: gen_market_sample(_mkt_sample_spec, /, *, sample_size = 10**6, seed_seq_list = None, nthreads = 16)

   Generate share, diversion ratio, price, and margin data for MarketSpec.


   :param _mkt_sample_spec: class specifying parameters for data generation, see :class:`mergeron.gen.MarketSpec`
   :param sample_size: number of draws to generate
   :param seed_seq_list: tuple of SeedSequences to ensure replicable data generation with
                         appropriately independent random streams
   :param nthreads: optionally specify the number of CPU threads for the PRNG

   :returns: Merging firms' shares, margins, etc. for each hypothetical  merger
             in the sample


.. py:function:: parse_seed_seq_list(_sseq_list, _mktshr_dist_type, _price_spec, /)

   Initialize RNG seed sequences to ensure independence of distinct random streams.

   The tuple of SeedSequences, is parsed in the following order
   for generating the relevant random variates:
   1.) quantity shares
   2.) price-cost margins
   3.) firm-counts, if :code:`MarketSpec.share_spec.dist_type` is a Dirichlet distribution
   4.) prices, if :code:`MarketSpec.price_spec ==`:attr:`mergeron.gen.PriceConstants.ZERO`.



   :param _sseq_list: List of RNG seed sequences
   :param _mktshr_dist_type: Market share distribution type
   :param _price_spec: Price specification

   :returns: Seed sequence data


.. py:function:: gen_divr_array(_recapture_form, _recapture_rate, _frmshr_array, _aggregate_purchase_prob = EMPTY_ARRAY_DEFAULT, /)

   Given merging-firm shares and related parameters, return diverion ratios.

   If recapture is specified as :attr:`mergeron.RECConstants.OUTIN`, then the
   choice-probability for the outside good must be supplied.

   :param _recapture_form: Enum specifying Fixed (proportional), Inside-out, or Outside-in
   :param _recapture_rate: If recapture is proportional or inside-out, the recapture rate
                           for the firm with the smaller share.
   :param _frmshr_array: Merging-firm shares.
   :param _aggregate_purchase_prob: 1 minus probability that the outside good is chosen; converts
                                    market shares to choice probabilities by multiplication.

   :returns: Merging-firm diversion ratios for mergers in the sample.


